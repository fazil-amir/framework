"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();$("document").ready(function(){$("select.form-control").selectpicker();var e=new commonUI;$("#submit-widget").on("click",function(){form.init($(this).data("form"),{buttonSelector:"#submit-widget",buttonText:"Please Wait..."},function(e){1===e.success?showMessage(e.message,"default"):showMessage(e.message,"error")}),form.validate()?e.submit():e.handleError()})});var commonUI=function(e){function t(){_classCallCheck(this,t);var I=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return I.preloadWidgetData=function(){I.getRichDataParsed().then(function(e){e?(e.map(function(e){I.renderWidgetItem(e)}),I.collapseOnlyLast(I.CKV_Item)):I.renderWidgetItem()})},I.renderWidgetItem=function(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;I.fetchTemplate(I.templateLocation).then(function(e){var t="CKV-icon-"+I.CKV_Counter,n="CKV-BG-"+I.CKV_Counter,a="CKV-delete-"+I.CKV_Counter,i="CKV-collapse-"+I.CKV_Counter;e=I.findAndReplace(e,"CKV_ITEM_COUNT",I.CKV_Counter),e=I.findAndReplace(e,"CKV_ITEM_ICON_ID",t),e=I.findAndReplace(e,"CKV_ITEM_BG_ID",n),e=I.findAndReplace(e,"CKV_ITEM_DELETE_ID",a),e=I.findAndReplace(e,"CKV_ITEM_COLLAPSE_ID",i);var o=g&&g.headline?g.headline:"";e=I.findAndReplace(e,"CKV_ITEM_HEADLINE",o);var r=g&&g.sub_headline?g.sub_headline:"";e=I.findAndReplace(e,"CKV_ITEM_SUB_HEADLINE",r);var l=g&&g.caption?g.caption:"";e=I.findAndReplace(e,"CKV_ITEM_CAPTION",l);var c=g&&g.sub_caption?g.sub_caption:"";e=I.findAndReplace(e,"CKV_ITEM_SUB_CAPTION",c);var s=g&&g.button_link?g.button_link:"";e=I.findAndReplace(e,"CKV_ITEM_BUTTON_LINK",s);var u=g&&g.button_caption?g.button_caption:"";e=I.findAndReplace(e,"CKV_ITEM_BUTTON_CAPTION",u);var d=g&&g.ckv_key1?g.ckv_key1:"";e=I.findAndReplace(e,"CKV_ITEM_CK_1",d);var _=g&&g.ckv_key2?g.ckv_key2:"";e=I.findAndReplace(e,"CKV_ITEM_CK_2",_);var C=g&&g.ckv_key3?g.ckv_key3:"";e=I.findAndReplace(e,"CKV_ITEM_CK_3",C);var p=g&&g.visibility?g.visibility:"";e=I.findAndReplace(e,"CKV_ITEM_VISIBILITY",I.getItemVisibilityState(p));var m=g&&g.message?g.message:"";e=I.findAndReplace(e,"CKV_ITEM_MESSAGE",m);var f=g&&g.icon?g.icon:"";e=I.findAndReplace(e,"CKV_ITEM_ICON",I.getImage(f));var v=g&&g.bg?g.bg:"";e=I.findAndReplace(e,"CKV_ITEM_BG",I.getImage(v)),I.CKV_Container.insertAdjacentHTML("beforeend",e),I.initPhoto(t),I.initPhoto(n),I.handleWidgetItemDelete(a,I.CKV_Item),I.handleContentCollapse(i,g),I.CKV_Counter++})},I.getImage=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e?'<div class="preview-images"><img src="'+e+'"><span class="icon delete"></span></div>':""},I.getCKVWidgetData=function(){for(var e=[],t=0;t<I.CKV_Item.length;t++){var n=I.CKV_Item[t].getElementsByTagName("input"),a=I.CKV_Item[t].getElementsByTagName("textarea"),i=I.CKV_Item[t].querySelectorAll(".input")[13].querySelector(".preview-images img"),o=I.CKV_Item[t].querySelectorAll(".input")[14].querySelector(".preview-images img");e.push({headline:n[0].value,sub_headline:n[5].value,caption:n[1].value,sub_caption:n[6].value,button_link:n[2].value,button_caption:n[7].value,ckv_key1:n[3].value,ckv_key2:n[8].value,ckv_key3:n[4].value,message:a[0].value,visibility:n[9].checked?"on":"off",icon:i?i.getAttribute("src"):"",bg:o?o.getAttribute("src"):""})}return e},I.submit=function(){I.saveWidget(I.getCKVWidgetData())},I.CKV_Counter=1,I.templateLocation=baseURL("modules/widgets/assets/common-ui/widget-common-ui-tmpl.html"),I.CKV_Container=document.getElementById("CKV-widget-container"),I.CKV_Item=document.getElementsByClassName("CKV-item"),I.collapseHandle=document.getElementsByClassName("collapse-handle"),I.preloadWidgetData(),I.handleWidgetItemAddClick(I.renderWidgetItem,I.CKV_Item),I.initSortable(),I}return _inherits(t,Widget),_createClass(t,[{key:"initSortable",value:function(){var e=this;$("#CKV-widget-container").sortable({handle:"span.move-handle",axis:"y",update:function(){return e.updateCount(e.CKV_Item)}})}},{key:"getItemVisibilityState",value:function(e){if("on"===e)return'checked="checked"'}},{key:"handleError",value:function(){this.collapseErrorContent(this.CKV_Item)}}]),t}();
//# sourceMappingURL=widget-common-ui.min.js.map
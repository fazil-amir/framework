"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();$("document").ready(function(){var e=new Testimonial;$("select.form-control").selectpicker(),$("#submit-widget").on("click",function(){form.init($(this).data("form"),{buttonSelector:"#submit-widget",buttonText:"Please Wait..."},function(e){1===e.success?showMessage(e.message,"default"):showMessage(e.message,"error")}),form.validate()?e.submit():e.handleError()})});var Testimonial=function(e){function t(){_classCallCheck(this,t);var T=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return T.preloadTestimonials=function(){T.getRichDataParsed().then(function(e){e?(e.map(function(e){T.renderTestimonial(e)}),T.collapseOnlyLast(T.testimonialElements)):T.renderTestimonial()})},T.renderTestimonial=function(){var p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;T.fetchTemplate(T.templateLocation).then(function(e){var t="testimonial-photo-"+T.testimonialCounter,n="testimonial-delete-"+T.testimonialCounter,i="testimonial-collapse-"+T.testimonialCounter;e=T.findAndReplace(e,"TESTIMONIAL_COUNT",T.testimonialCounter),e=T.findAndReplace(e,"TESTIMONIAL_IMG_ID",t),e=T.findAndReplace(e,"TESTIMONIAL_DELETE_ID",n),e=T.findAndReplace(e,"TESTIMONIAL_COLLAPSE_ID",i);var a=p&&p.full_name?p.full_name:"";e=T.findAndReplace(e,"TESTIMONIAL_FULL_NAME",a);var o=p&&p.designation?p.designation:"";e=T.findAndReplace(e,"TESTIMONIAL_DESIGNATION",o);var l=p&&p.company?p.company:"";e=T.findAndReplace(e,"TESTIMONIAL_COMPANY",l);var s=p&&p.location?p.location:"";e=T.findAndReplace(e,"TESTIMONIAL_LOCATION",s);var r=p&&p.message?p.message:"";e=T.findAndReplace(e,"TESTIMONIAL_MESSAGE",r);var c=p&&p.facebook?p.facebook:"";e=T.findAndReplace(e,"TESTIMONIAL_FACEBOOK",c);var m=p&&p.linkedin?p.linkedin:"";e=T.findAndReplace(e,"TESTIMONIAL_LINKEDIN",m);var u=p&&p.twitter?p.twitter:"";e=T.findAndReplace(e,"TESTIMONIAL_TWITTER",u);var d=p&&p.website?p.website:"";e=T.findAndReplace(e,"TESTIMONIAL_WEBSITE",d);var f=p&&p.photo?p.photo:"";e=T.findAndReplace(e,"TESTIMONIAL_IMAGE",T.getImageTemplate(f)),T.testimonialContainer.insertAdjacentHTML("beforeend",e),T.initPhoto(t),T.handleWidgetItemDelete(n,T.testimonialElements),T.handleContentCollapse(i,p),T.testimonialCounter++})},T.initSortable=function(){$("#testimonials").sortable({handle:"span.move-handle",axis:"y",update:function(){return T.updateCount(T.testimonialElements)}})},T.getImageTemplate=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e?'<div class="preview-images"><img src="'+e+'"><span class="icon delete"></span></div>':""},T.getSliderData=function(){for(var e=[],t=0;t<T.testimonialElements.length;t++){var n=T.testimonialElements[t].getElementsByTagName("input"),i=T.testimonialElements[t].getElementsByTagName("textarea"),a=T.testimonialElements[t].querySelector(".preview-images img");e.push({full_name:n[0].value,designation:n[1].value,company:n[2].value,location:n[3].value,facebook:n[4].value,linkedin:n[5].value,twitter:n[6].value,website:n[7].value,message:i[0].value,photo:a.getAttribute("src")})}return e},T.submit=function(){T.saveWidget(T.getSliderData())},T.testimonialCounter=1,T.templateLocation=baseURL("modules/widgets/assets/testimonial/widget-testimonial-tmpl.html"),T.testimonialContainer=document.getElementById("testimonials"),T.testimonialElements=document.getElementsByClassName("testimonial-item"),T.collapseHandle=document.getElementsByClassName("collapse-handle"),T.preloadTestimonials(),T.handleWidgetItemAddClick(T.renderTestimonial,T.testimonialElements),T.initSortable(),T}return _inherits(t,Widget),_createClass(t,[{key:"handleError",value:function(){this.collapseErrorContent(this.testimonialElements)}}]),t}();
//# sourceMappingURL=widget-testimonial.min.js.map